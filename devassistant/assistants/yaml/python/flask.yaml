flask:
  fullname: Flask
  description: 'Flask assistant will help you create a basic Flask project and install its dependencies.'

  dependencies:
  - rpm: ['python-flask', 'python-flask-sqlalchemy', 'python-flask-wtf']

  dependencies_eclipse:
  - rpm: ['eclipse-pydev']

  args:
    name:
      snippet: common_args

    eclipse:
      snippet: common_args

    github:
      snippet: common_args

  files:
    gitignore: &gitignore
      source: python/.gitignore
    dot_project: &dot_project
      source: python/.project
    dot_pydevproject: &dot_pydevproject
      source: python/.pydevproject
    initpy: &initpy
      source: python/flask/__init__.py

  run:
  - $dirname: dirname $name
  - $basename: basename $name
  - log_i: 'Creating Flask project $basename in $dirname ...'
  - if ls $name:
    - log_e: '$name already exists, cannot proceed.'
  - cl: mkdir -p $name
  - dda_c: $name
  - cl: cd $name
  - cl: mkdir static templates
  - cl: cp *initpy .
  - if $eclipse:
    - log_i: 'Registering as Eclipse project ...'
    - cl: cp *dot_project .
    - cl: cp *dot_pydevproject .
    - cl: sed -i 's|NAME|$basename|' .project
    - cl: sed -i 's|NAME|$basename|' .pydevproject
    - cl: eclipse -nosplash -application org.eclipse.cdt.managedbuilder.core.headlessbuild -import $name -data $eclipse
    - log_i: 'Registered as Eclipse project ...'
  - cl: cp *gitignore .
  - snippet: git_init_add_commit
  - if defined $github:
    - github: create_and_push
  - log_i: 'Flask project $basename in $dirname has been created.'
